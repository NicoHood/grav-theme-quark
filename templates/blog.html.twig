{% extends 'partials/base.html.twig' %}
{% set blog_image = page.media.images[page.header.hero_image] ?: page.media.images|first %}
{% set collection = page.collection() %}
{% set show_breadcrumbs = theme_var('show_breadcrumbs', true) %}
{% set show_sidebar = theme_var('show_sidebar', true) %}
{% set show_pagination = theme_var('show_pagination', true) %}

{% block hero %}
    {% include 'partials/hero.html.twig' with {id: 'blog-hero', content: page.content, hero_image: blog_image} %}
{% endblock %}

{# We must override the body here in order to inject the additional class blog-listing #}
{% block body %}
    <section id="body-wrapper" class="section">
        <section class="container {{ grid_size }}">

        {% block messages %}
            {% include 'partials/messages.html.twig' ignore missing %}
        {% endblock %}

        {% block breadcrumbs %}
            {% if show_breadcrumbs and config.plugins.breadcrumbs.enabled %}
                {% include 'partials/breadcrumbs.html.twig' %}
            {% endif %}
        {% endblock %}

        {{ block('content_surround') }}

        </section>
    </section>
{% endblock %}

{% block content %}
    {% embed 'partials/layout.html.twig' with {blog: page} %}
        {% block item %}

            <div class="blog-listing columns">
                <div class="column col-6 col-lg-12">
                    {% for child in collection %}
                        {% if loop.index0 % 2 == 0 %}
                            {% include 'partials/blog-list-item.html.twig' with {blog: page, page: child} %}
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="column col-6 col-lg-12">
                    {% for child in collection %}
                        {% if loop.index0 % 2 == 1 %}
                            {% include 'partials/blog-list-item.html.twig' with {blog: page, page: child} %}
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

            {% if show_pagination and config.plugins.pagination.enabled and collection.params.pagination %}
                <div id="listing-footer">
                    {% include 'partials/pagination.html.twig' with {base_url: page.url, pagination: collection.params.pagination} %}
                </div>
            {% endif %}

        {% endblock %}

        {% block sidebar %}
            {% include 'partials/sidebar.html.twig' %}
        {% endblock %}
    {% endembed %}
{% endblock %}
